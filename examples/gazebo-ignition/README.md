# Gazebo Modern Example

This example demonstrates how to use maps generated by ROS GridMap Generator with Gazebo Modern and ROS2 Jazzy.

**Note**: Uses the latest Gazebo (Modern/Harmonic) with native ROS2 Jazzy support and `nav2_minimal_tb3_sim` for TurtleBot3 simulation.

## Quick Start

1. Make sure you have exported map files from the main application to `../shared/maps/`
2. Build and run the container:

```bash
# Build the image
docker-compose build gazebo-ignition

# Run the container
docker-compose run --rm gazebo-ignition
```

## Available Commands

Once inside the container, you can run:

### Launch SDF World Only
```bash
ros2 launch /workspace/launch/test_world.launch.py
```
This directly launches Gazebo Ignition with the generated `world_ignition.sdf` file for world visualization only.

### Launch with Map Server & Robot
```bash
ros2 launch /workspace/launch/test_map.launch.py
```
This loads the SDF world, spawns a TurtleBot3 robot using `nav2_minimal_tb3_sim`, starts the map server with `map_ros2.yaml`, and launches RViz2 for visualization.

### Manual Gazebo Launch
```bash
gz sim /workspace/maps/world_ignition.sdf
```

### Manual Map Server
```bash
ros2 run nav2_map_server map_server --ros-args -p yaml_filename:=/workspace/maps/map_ros2.yaml
```

## Required Files

Make sure these files exist in `../shared/maps/`:
- `world_ignition.sdf` - Generated Gazebo Ignition world
- `map_ros2.yaml` - ROS2 format map configuration
- `map.pgm` - Map image file

## Troubleshooting

### GUI Not Showing
Make sure X11 forwarding is enabled:
```bash
xhost +local:docker
```

### Graphics Issues
If you encounter OpenGL issues, try:
```bash
export LIBGL_ALWAYS_SOFTWARE=1
export MESA_GL_VERSION_OVERRIDE=3.3
```

### TurtleBot3 Model Issues
The default model is set to 'burger'. Change it if needed:
```bash
export TURTLEBOT3_MODEL=waffle_pi
```

## Notes

- This uses Gazebo Modern (Harmonic) which is the default for ROS2 Jazzy
- Uses `nav2_minimal_tb3_sim` package for reliable TurtleBot3 simulation
- Map server uses the nav2_map_server for ROS2 compatibility
- TurtleBot3 simulation uses native Gazebo Modern support
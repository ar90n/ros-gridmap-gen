# Flatland Example

This example demonstrates how to use Flatland 2D simulator with maps generated by ROS GridMap Generator.

## Quick Start

1. Make sure you have exported map files from the main application to `../shared/maps/`
2. Build and run the container:

```bash
# Build the image (this takes a few minutes as it compiles Flatland)
docker-compose build flatland

# Run the container
docker-compose run --rm flatland
```

## Available Commands

Once inside the container, you can run:

### Launch with Map Server
```bash
roslaunch /workspace/launch/test_map.launch
```
This loads the generated `map_ros1.yaml` file and starts Flatland with a robot model.

### Launch Simple Setup
```bash
roslaunch /workspace/launch/test_simple.launch
```
This provides a minimal setup with map server and Flatland.

### Manual Map Server
```bash
rosrun map_server map_server /workspace/maps/map_ros1.yaml
```

### Flatland Server Only
```bash
roslaunch flatland_server server.launch world_path:=/path/to/world.yaml
```

## Required Files

Make sure these files exist in `../shared/maps/`:
- `map_ros1.yaml` - ROS1 format map configuration
- `map.pgm` - Map image file

Note: Flatland uses standard ROS map files (PGM + YAML), not custom world files like Gazebo or MVSim.

## Troubleshooting

### Build Issues
If the Docker build fails, try:
```bash
docker-compose build --no-cache flatland
```

### GUI Not Showing
Make sure X11 forwarding is enabled:
```bash
xhost +local:docker
```

### Flatland Not Starting
Check if the world file exists and is valid:
```bash
roslaunch flatland_server server.launch world_path:=$(rospack find flatland_server)/worlds/simple.yaml
```

## Flatland Features

- **2D Physics**: Light-weight 2D simulation using Box2D
- **High Performance**: Optimized for large-scale multi-robot simulation
- **Standard Maps**: Uses standard ROS occupancy grid maps (PGM + YAML)
- **Flexible Models**: YAML-based robot and world configuration
- **RViz Integration**: Visualizes simulation in RViz
- **ROS Integration**: Full ROS compatibility with topics and services

## Topics and Services

Flatland provides:
- `/scan` - Laser scan data (if robot has laser)
- `/odom` - Odometry information
- `/cmd_vel` - Velocity commands (subscribe)
- `/tf` - Transform information

## Model Configuration

Flatland uses YAML files to define:
- World properties (walls, obstacles)
- Robot models (geometry, sensors)
- Physics parameters
- Visualization settings

The generated PGM map is used for collision detection and navigation planning.